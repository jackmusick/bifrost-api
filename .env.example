# Bifrost Environment Configuration
#
# Quick Start: Run ./setup.sh to generate this file with secure random secrets.
# Manual Setup: Copy this file to .env and customize as needed.
#
# All settings use BIFROST_ prefix for the API.
# Docker Compose also uses POSTGRES_PASSWORD and RABBITMQ_PASSWORD directly.

# =============================================================================
# Infrastructure Passwords (used by Docker Compose)
# =============================================================================
# Auto-generated by setup.sh - or set your own values
POSTGRES_PASSWORD=bifrost_dev
RABBITMQ_PASSWORD=bifrost_dev

# =============================================================================
# Core Settings
# =============================================================================
BIFROST_ENVIRONMENT=development
BIFROST_DEBUG=false

# =============================================================================
# Development - VS Code Debugging
# =============================================================================
# Set to true to enable debugpy (API waits for VS Code debugger on port 5678)
# ENABLE_DEBUG=true

# =============================================================================
# Security - Secret Key
# =============================================================================
# Auto-generated by setup.sh - MUST change in production!
# Used for JWT signing and Fernet encryption of secrets.
# Must be at least 32 characters.
BIFROST_SECRET_KEY=dev-secret-key-change-in-production-must-be-32-chars

# =============================================================================
# Database (PostgreSQL)
# =============================================================================
# These are set automatically in docker-compose.yml, but can be overridden
# BIFROST_DATABASE_URL=postgresql+asyncpg://bifrost:bifrost_dev@postgres:5432/bifrost
# BIFROST_DATABASE_URL_SYNC=postgresql://bifrost:bifrost_dev@postgres:5432/bifrost
# BIFROST_DATABASE_POOL_SIZE=5
# BIFROST_DATABASE_MAX_OVERFLOW=10

# =============================================================================
# Message Queue (RabbitMQ)
# =============================================================================
# Set automatically in docker-compose.yml
# BIFROST_RABBITMQ_URL=amqp://bifrost:bifrost_dev@rabbitmq:5672/

# =============================================================================
# Cache & Sessions (Redis)
# =============================================================================
# Set automatically in docker-compose.yml
# BIFROST_REDIS_URL=redis://redis:6379/0

# =============================================================================
# JWT Token Settings
# =============================================================================
BIFROST_ACCESS_TOKEN_EXPIRE_MINUTES=30
BIFROST_REFRESH_TOKEN_EXPIRE_DAYS=7

# =============================================================================
# CORS (comma-separated origins)
# =============================================================================
BIFROST_CORS_ORIGINS=http://localhost:3000

# =============================================================================
# Frontend URL (for OAuth redirects)
# =============================================================================
BIFROST_FRONTEND_URL=http://localhost:3000

# =============================================================================
# MFA Settings
# =============================================================================
BIFROST_MFA_ENABLED=true
BIFROST_MFA_TOTP_ISSUER=Bifrost
BIFROST_MFA_RECOVERY_CODE_COUNT=10
BIFROST_MFA_TRUSTED_DEVICE_DAYS=30

# =============================================================================
# Default Admin User (Optional)
# =============================================================================
# If set, creates this user on startup (skips setup wizard)
# Leave commented to use the setup wizard on first access
# BIFROST_DEFAULT_USER_EMAIL=admin@localhost
# BIFROST_DEFAULT_USER_PASSWORD=admin

# =============================================================================
# OAuth SSO - Microsoft Entra ID (Optional)
# =============================================================================
# BIFROST_MICROSOFT_CLIENT_ID=
# BIFROST_MICROSOFT_CLIENT_SECRET=
# BIFROST_MICROSOFT_TENANT_ID=common

# =============================================================================
# OAuth SSO - Google (Optional)
# =============================================================================
# BIFROST_GOOGLE_CLIENT_ID=
# BIFROST_GOOGLE_CLIENT_SECRET=

# =============================================================================
# OAuth SSO - Generic OIDC Provider (Optional)
# =============================================================================
# BIFROST_OIDC_DISCOVERY_URL=
# BIFROST_OIDC_CLIENT_ID=
# BIFROST_OIDC_CLIENT_SECRET=

# =============================================================================
# Server Settings
# =============================================================================
BIFROST_HOST=0.0.0.0
BIFROST_PORT=8000
